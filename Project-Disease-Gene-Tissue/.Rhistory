filter(disease==dn)
res<-data.frame("tissue"=gene_disease_tissue,"val"=as.numeric(as.vector(local[1,2:55])))
ggplot(res%>%top_n(10,val))+
geom_col(mapping = aes(x=reorder(tissue,val),y=val))+
coord_flip()
}
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
showrel<-function(dn,nmsl){
local<-all_relation%>%
filter(disease==dn)
res<-data.frame("tissue"=gene_disease_tissue,"val"=as.numeric(as.vector(local[1,2:55])))
ggplot(res%>%top_n(10,val))+
geom_col(mapping = aes(x=reorder(tissue,val),y=val))+
coord_flip()+
labs(xlab="Correlation")
}
runApp('some_shiny_app')
showrel<-function(dn,nmsl){
local<-all_relation%>%
filter(disease==dn)
res<-data.frame("tissue"=gene_disease_tissue,"val"=as.numeric(as.vector(local[1,2:55])))
ggplot(res%>%top_n(10,val))+
geom_col(mapping = aes(x=reorder(tissue,val),y=val))+
coord_flip()+
labs(xlab("Correlation"),ylab("Diseases"),title = nmsl)
}
runApp('some_shiny_app')
gene_d
gene_d
runApp('some_shiny_app')
gene_d
showrel("C0036341")
showrel("C0036341","nmsl")
ggplot(res%>%top_n(10,val))+
geom_col(mapping = aes(x=reorder(tissue,val),y=val))+
coord_flip()+
labs(xlab="Correlation",ylab="Diseases",title = nmsl)
showrel<-function(dn,nmsl){
local<-all_relation%>%
filter(disease==dn)
res<-data.frame("tissue"=gene_disease_tissue,"val"=as.numeric(as.vector(local[1,2:55])))
ggplot(res%>%top_n(10,val))+
geom_col(mapping = aes(x=reorder(tissue,val),y=val))+
coord_flip()+
labs(xlab="Correlation",ylab="Diseases",title = nmsl)
}
showrel("C0036341","nmsl")
showrel<-function(dn,nmsl){
local<-all_relation%>%
filter(disease==dn)
res<-data.frame("tissue"=gene_disease_tissue,"val"=as.numeric(as.vector(local[1,2:55])))
ggplot(res%>%top_n(10,val))+
geom_col(mapping = aes(x=reorder(tissue,val),y=val))+
coord_flip()+
labs(xlab=c("Correlation"),ylab=c("Diseases"),title = nmsl)
}
showrel("C0036341","nmsl")
showrel<-function(dn,nmsl){
local<-all_relation%>%
filter(disease==dn)
res<-data.frame("tissue"=gene_disease_tissue,"val"=as.numeric(as.vector(local[1,2:55])))
ggplot(res%>%top_n(10,val))+
geom_col(mapping = aes(x=reorder(tissue,val),y=val))+
coord_flip()+
labs(x="Correlation",y="Diseases",title = nmsl)
}
showrel("C0036341","nmsl")
showrel<-function(dn,nmsl){
local<-all_relation%>%
filter(disease==dn)
res<-data.frame("tissue"=gene_disease_tissue,"val"=as.numeric(as.vector(local[1,2:55])))
ggplot(res%>%top_n(10,val))+
geom_col(mapping = aes(x=reorder(tissue,val),y=val))+
coord_flip()+
labs(x="Diseases",y="Correlation",title = nmsl)
}
showrel("C0036341","nmsl")
runApp('some_shiny_app')
exportVisualStyles(
filename = "test.JSON",
type = "JSON"
)
draw_disease_pathway("C0242379","WP2261")
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\test\\network.json",
type = "JSON"
)
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\network.json",
type = "JSON"
)
runApp('rcytest')
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\network",
type = "JSON"
)
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\network",
type = "JSON"
)
exportNetwork(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\java",
type= "cyjs"
)
runApp('rcytest')
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\network",
type = "JSON"
)
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\network",
type = "JSON"
)
exportNetwork(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\java",
type= "cyjs"
)
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
exportNetwork(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\java",
type= "cyjs"
)
enc_analysis("C024279")
gene_d
enc_analysis("C0019209")
draw_disease_pathway("C024279","WP299")
enc_analysis("C0030567")
enc_analysis("C024279")
gene_d
enc_analysis("C0019209")
draw_disease_pathway("C0019209","WP299")
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\network",
type = "JSON"
)
exportNetwork(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\java",
type= "cyjs"
)
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
draw_disease_pathway("C0019209","WP2261")
RCy3::commandsRun('wikipathways import-as-pathway id=WP2261')
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\one",
type = "JSON"
)
exportNetwork(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\two",
type= "cyjs"
)
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
RCy3::commandsRun('wikipathways import-as-pathway id=WP152')
RCy3::commandsRun('wikipathways import-as-pathway id=WP4153')
exportVisualStyles(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\wp4153",
type = "JSON"
)
runApp('rcytest')
exportNetwork(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\wp4153",
type= "cyjs"
)
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
exportNetwork(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\at",
type= "cyjs"
)
exportImage(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test",
resolution = 600,
)
exportImage(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test",
resolution = 72,
)
exportImage(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test",
type="bmp",
resolution = 72,
)
exportImage(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test",
type="JPEG",
resolution = 72,
)
exportImage(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test",
type="JPEG",
resolution = 600,
)
exportImage(
filename = "D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test",
type="SVG",
resolution = 600,
)
runApp('rcytest')
runApp('rcytest')
runApp('rcytest')
pw_print("C0007103")
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
# pw_bar<-function(tbl){
#   tbl<-enc_analysis("C0007103")
#   nw<-tbl%>%
#     filter(pvalue<1e-5)%>%
#     head(10)
#   ggplot(nw)+
#     geom_col(aes(ID,pvalue))+
#     coord_flip()
# }
pw_print<-function(dis){
tbl<-enc_analysis(dis)
nw<-tbl%>%
filter(pvalue<1e-5)%>%
head(10)
rs<-paste0('These were the biological pathways\nrelated to disease ',get_disease(dis),'(',dis,')','\nby doing Over-representation Analysis (ORA):\n')
for(i in 1:nrow(nw)){
rs<-paste0(rs,"ID of pathway:",(nw$ID)[i],"\n","Description:",
(nw$Description)[i],"\n","P value:",(nw$pvalue)[i],"\n\n")
}
rs
}
# pw_bar<-function(tbl){
#   tbl<-enc_analysis("C0007103")
#   nw<-tbl%>%
#     filter(pvalue<1e-5)%>%
#     head(10)
#   ggplot(nw)+
#     geom_col(aes(ID,pvalue))+
#     coord_flip()
# }
pw_print<-function(dis){
tbl<-enc_analysis(dis)
nw<-tbl%>%
filter(pvalue<1e-5)%>%
head(10)
rs<-paste0('These were the biological pathways\nrelated to disease ',get_disease(dis),'(',dis,')','\nby doing Over-representation Analysis (ORA):\n')
for(i in 1:nrow(nw)){
rs<-paste0(rs,"ID of pathway:",(nw$ID)[i],"\n","Description:",
(nw$Description)[i],"\n","P value:",(nw$pvalue)[i],"\n\n")
}
rs
}
runApp('some_shiny_app')
runApp('rcytest')
runApp('some_shiny_app')
library(httr)
wp<-"wp430"
GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp))
wp<-"WP430"
GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp))
library(XML)
library(XML)
XML
s<-GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp))
xmlAttrs(s,"div")
s<-content(GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp)))
xmlAttrs(s,"div")
s<-content(GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp)))[[1]]
s
xmlAttrs(s,"div")
s<-content(GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp)))[[2]]
s
xmlAttrs(s,"div")
write_html(s,file="w.html")
page<-read_html("w.html")
s<-content(GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp)))
write_html(s,file="w.html")
library(xml2)
library(xml2)
write_html(s,file="w.html")
page<-read_html("w.html")
page
xmlAttrs(s,"div")
xmlAttrs(s[[1]],"div")
xmlAttrs(s[[2]],"div")
page
page[[2]]
content(page[[2]])
typeof(page[[2]])
typeof(page)
View(page)
hotitem<-xml_find_all(page,".//section")
item
item<-xml_find_all(page,".//section")
item<-xml_find_all(page,".//div")
item
item<-xml_find_all(page,"id")
item<-xml_find_all(page,"=")
item<-xml_find_all(page,"id")
item<-xml_contents(page)
item
item[[2]]
item[[2]][[4]]
item[[2]]
item[[2]][2]
page
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)
this
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)xml_child(3)%>%xml_child(18)
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(18)
this
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(17)
this
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(18)
this
xml_contents(this)
xml_contents(this)[1]
xml_contents(this)[1][1]
xml_text(this)
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(18)%>%xml_child(1)
xml_text(this)
xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(18)
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(18)
this
this
this[1]
xml_text(this[1])
this[[1]]
xml_contents(this)
xml_contents(this)[1]
xml_text(xml_contents(this)[1])
xml_text(xml_contents(this)[1])}
xml_text(xml_contents(this)[1])}
get_des<-function(wp){
s<-content(GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp)))
write_html(s,file="w.html")
page<-read_html("w.html")
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(18)
xml_text(xml_contents(this)[1])
}
get_des("WP316")
get_des("WP3216")
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
library(tidyverse)
s<-"ahufdfuifafyiWP3957fbafjo----3hfWP2941"
str_subset(s,"WP[0-9]+")
str_subset(s,"WP[0-9]+")
str_match(s,"WP[0-9]+")
str_match(s,"WP[0-9]+")[1]
s<-''
str_match(s,"WP[0-9]+")[1]
get_des<-function(wp){
if(is.na(wp)) {"No pathway name selected"}
s<-content(GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp)))
write_html(s,file="w.html")
page<-read_html("w.html")
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(18)
xml_text(xml_contents(this)[1])
}
runApp('some_shiny_app')
str_match(s,"WP[0-9]+")
is.na(str_match(s,"WP[0-9]+")
)
if(is.na(str_match(s,"WP[0-9]+"))) {HTML("No pathway name selected")}
else {
HTML(get_des(str_match(s,"WP[0-9]+")[1]))}
runApp('some_shiny_app')
wpid
wpid2name
wpid2name["Pathway"=="WP1"]
wpid2name[Pathway=="WP1"]
library(httr)
library(xml2)
library(lubridate)
library(XML)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(gganimate)
wpid2name
wpid2name
(wpid2name%>%
filter(wpid==id))$name[1]
get_pn<-function(id){
(wpid2name%>%
filter(wpid==id))$name[1]
}
get_pn("WP3216")
get_pn("WP4153")
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
file.remove("D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test")
"D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test"
file.remove("D:\\R_for_data_science\\Project-Disease-Gene-Tissue\\files\\test.svg")
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('rcytest')
runApp('D:/R_for_data_science/Project-Disease-Gene-Tissue/some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app',port=8080,host="172.16.101.105")
runApp('some_shiny_app',port=8080,host="192.168.0.112")
runApp('some_shiny_app')
shiny::runApp('some_shiny_app')
runApp('some_shiny_app',port=8080,host="172.16.101.105")
library(clusterProfiler)
library(rWikiPathways)
library(DOSE)
library(RCy3)
library(tidyverse)
library(tidyverse)
library(BiocManager)
library(RCy3)
library(rWikiPathways)
library(RColorBrewer)
library(pathview)
library(httr)
library(xml2)
library(lubridate)
library(XML)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(gganimate)
runApp('some_shiny_app')
runApp('some_shiny_app',port=8080,host="192.168.0.112")
runApp('some_shiny_app',port=8080,host="172.16.101.105")
shiny::runApp('some_shiny_app')
runApp('some_shiny_app')
runApp('some_shiny_app')
get_des<-function(wp){
s<-httr::content(GET(paste0("https://www.wikipathways.org/index.php/Pathway:",wp)))
write_html(s,file="w.html")
page<-read_html("w.html")
this<-xml_child(page,2)%>%xml_child(1)%>%xml_child(1)%>%xml_child(1)%>%xml_child(3)%>%xml_child(18)
xml_text(xml_contents(this)[1])
}
runApp('some_shiny_app')
pw_print
all_dis
SemanticType
selectedpw
get_pn
wpid2gene
get_des
pw_print
showrel
pw_print
showrel
enc_analysis
get_disease
saveRDS(c(all_dis,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d),"alldata.RDA")
saveRDS(c(all_dis,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d,SemanticType,type_list),"D:\\R_for_data_science\\shiny-test\\publish\\alldata.RDA")
SemanticType
save(c(all_dis,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d),"all.shiny")
save(all_dis,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d,"all.shiny")
save(all_dis,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d,"all.shiny")
save(all_dis,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d,"all.shiny")
source("all.shiny")
save(all_dis,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d,ffile = "all.shiny")
save(all_dis,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d,file = "all.shiny")
save(all_dis,gene_disease_tissue,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d,ffile = "all.shiny")
save(all_dis,gene_disease_tissue,SemanticType,get_pn,get_des,pw_print,showrel,enc_analysis,get_disease,wpid2name,wpid2gene,all_relation,gene_d,file = "all.shiny")
